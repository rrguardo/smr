{% extends "base_layout.html" %}

{% block title %} {{ gettext('API Documentation') }} {% endblock %}

{% block section %}

   <div class="hero-unit">
     <h2>{{ gettext('API Documentation') }}</h2>
     <hr>

    <p>
    In order to use the API, create an account in our system. The required credentials
    for the API usage are the "user id" and "authentication token". This info is
    located at the users panel.
    </p>

   <p>
       <a target="_blank" href="https://bitbucket.org/smr-team/easy_sms_python" >
       <strong>Python</strong> API client!</a>.
   </p>

   <p>
       <a target="_blank" href="https://bitbucket.org/smr-team/easy_sms_php_lib" >
       <strong>PHP</strong> API client!</a>.
   </p>

   <p>
       <a target="_blank" href="https://bitbucket.org/smr-team/easy_sms_net" >
       <strong>.Net</strong> API client here!</a>.
   </p>

   <hr>

    <div class="row">
        <h3>How send a SMS</h3>
        <p>
            Do a HTTP POST request to the API url <strong>{{ api_url }}sms</strong> 
            using the following HTTP POST vars.
        </p>
    
      <div class="span5">
            <dl>
                <dt>user_id</dt>
                <dd>
                    The user <strong>account id</strong>, located at user panel.
                </dd>
                
                <dt>auth_token</dt>
                <dd>
                    The user <strong>authentication token</strong>, located at user panel.
                </dd>
                
                <dt>to</dt>
                <dd>
                    The phone number where send the SMS.
                </dd>
                
                <dt>body</dt>
                <dd>
                    The SMS text message to send.
                </dd>
            </dl>
      </div>
    </div>


    <div class="row">
        <h5>HTTP FORM example</h5>

        <pre class="pre-scrollable">
&lt;form action=&quot;{{ api_url }}sms&quot; method=&quot;post&quot;&gt;

    &lt;label&gt;User ID:
    &lt;input type=&quot;text&quot; name=&quot;user_id&quot;&gt;
    &lt;/label&gt;
    
    &lt;br&gt;&lt;/br&gt;
    &lt;label&gt;Auth Token:
    &lt;input type=&quot;text&quot; name=&quot;auth_token&quot;&gt;
    &lt;/label&gt;
    
    &lt;br&gt;&lt;/br&gt;
    &lt;label&gt;Receiver phone number:
    &lt;input type=&quot;text&quot; name=&quot;to&quot;&gt;
    &lt;/label&gt;
    
    &lt;br&gt;&lt;/br&gt;
    &lt;label&gt;Message:&lt;/label&gt;
    &lt;input type=&quot;text&quot; name=&quot;body&quot;&gt;
    &lt;/label&gt;
    
    &lt;br&gt;&lt;/br&gt;
    &lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;
    
&lt;/form&gt;
        </pre>
    </div>

    <div class="row">
    <h3>The server response will be a json like:</h3>

    <dl>
      <dt>{'success': 'ok', 'pid': 123}</dt>
      <dd>
       The <strong>success</strong> key is returned when message was delivered ok to our system.
          The processing id <strong>pid</strong> returned can be used for track the SMS message status.
      </dd>

      <dt>
          {'error': 'error description'}
      </dt>
      <dd>
          The <strong>error</strong> key is returned if something fail while the message is posted.
          The value for <strong>error</strong> key, will contains details with the reason for the fail.
          Some of the possible error details returned are:
          <ul>
            <li>Login error</li>
            <li>Low balance</li>
            <li>Destination number required!</li>
            <li>Message required!</li>
            <li>Message with more than 160 chars</li>
          </ul>
      </dd>
    </dl>
    </div>

    <hr>

    <div class="row">
    <h3>How know the account credits available.</h3>
    <p>
        Do a HTTP POST request to the API url <strong>{{ api_url }}balance</strong>
        using the following HTTP POST vars.
    </p>

      <dl>
        <dt>user_id</dt>
        <dd>
            Your user account id, located at user panel.
        </dd>

        <dt>auth_token</dt>
        <dd>
            Your user account "authentication token", located at user panel.
        </dd>
      </dl>
    </div>

    <div class="row">
    <h3>The server response will be a json like:</h3>

    <dl>
      <dt>{'balance': 20.0}</dt>
      <dd>
       The <strong>balance</strong> key is returned with the value set as the user credits/balance.
      </dd>

      <dt>
          {'error': 'Login error'}
      </dt>
      <dd>
          The <strong>error</strong> key is returned if authentication info (user id or token) is wrong.
      </dd>
    </dl>
    </div>

    <div class="row">
        <h5>HTTP FORM example</h5>

        <pre class="pre-scrollable">
&lt;form action=&quot;{{ api_url }}balance&quot; method=&quot;post&quot;&gt;

    &lt;label&gt;User ID:
    &lt;input type=&quot;text&quot; name=&quot;user_id&quot;&gt;
    &lt;/label&gt;

    &lt;br&gt;&lt;/br&gt;
    &lt;label&gt;Auth Token:
    &lt;input type=&quot;text&quot; name=&quot;auth_token&quot;&gt;
    &lt;/label&gt;

    &lt;br&gt;&lt;/br&gt;
    &lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;

&lt;/form&gt;
        </pre>
    </div>

    <div class="row">
    <h3>How verify sms sent status.</h3>
    <p>
        Do a HTTP POST request to the API url <strong>{{ api_url }}status</strong>
        using the following HTTP POST vars.
    </p>

      <dl>
        <dt>user_id</dt>
        <dd>
            Your user account id, located at user panel.
        </dd>

        <dt>auth_token</dt>
        <dd>
            Your user account "authentication token", located at user panel.
        </dd>

      <dt>pid</dt>
        <dd>
            The processing id <strong>pid</strong> returned when you sent the sms.
        </dd>
      </dl>
    </div>

    <div class="row">
    <h3>The server response will be a json like:</h3>

    <dl>
      <dt>{'status': 'queued'}</dt>
      <dd>
       The <strong>status</strong> key is returned with the value set as the sms current status.
       Possible status values are:
          <ul>
              <li>
                  <strong>queued</strong> When the sms is in the processing queue waiting to be delivered.
              </li>
              <li>
                  <strong>success-delivered</strong> The sms was delivered successful.
              </li>
              <li>
                  <strong>failed</strong> The sms delivery fails.
              </li>
          </ul>
      </dd>

      <dt>
          {'error': 'error description'}
      </dt>
      <dd>
          The <strong>error</strong> key is returned if you submit incorrect credentials or use an invalid
          processing id <strong>pid</strong>.
          Some of the possible error details returned are:
          <ul>
            <li>
                <strong>Login error</strong> Incorrect credentials provided.
            </li>
            <li>
                <strong>Pid error</strong> Incorrect processing id <strong>pid</strong> provided.
            </li>
          </ul>
      </dd>

    </dl>
    </div>

    <div class="row">
        <h5>HTTP FORM example</h5>

        <pre class="pre-scrollable">
&lt;form action=&quot;{{ api_url }}status&quot; method=&quot;post&quot;&gt;

    &lt;label&gt;User ID:
    &lt;input type=&quot;text&quot; name=&quot;user_id&quot;&gt;
    &lt;/label&gt;

    &lt;br&gt;&lt;/br&gt;
    &lt;label&gt;Auth Token:
    &lt;input type=&quot;text&quot; name=&quot;auth_token&quot;&gt;
    &lt;/label&gt;

    &lt;br&gt;&lt;/br&gt;
    &lt;label&gt;Processing ID:
    &lt;input type=&quot;text&quot; name=&quot;pid&quot;&gt;
    &lt;/label&gt;

    &lt;br&gt;&lt;/br&gt;
    &lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;

&lt;/form&gt;
        </pre>
    </div>


</div>
{% endblock %}